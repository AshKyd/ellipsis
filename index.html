#!/bin/sh
<<EOF
<html>
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <title>ellipsis</title>
    <link rel="stylesheet" href="stylesheets/styles.css"/>
    <link rel="stylesheet" href="stylesheets/pygment_trac.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--if lt IE 9script(src='//html5shiv.googlecode.com/svn/trunk/html5.js')
    -->
    <!--if lt IE 8link(rel='stylesheet', href='stylesheets/ie.css')
    -->
  </head>
  <body>
    <div id="header">
      <nav>
        <li class="fork"><a href="https://github.com/zeekay/ellipsis">View On GitHub</a></li>
        <li class="downloads"><a href="https://github.com/zeekay/ellipsis/zipball/master">ZIP</a></li>
        <li class="downloads"><a href="https://github.com/zeekay/ellipsis/tarball/master">TAR</a></li>
        <li class="title">DOWNLOADS</li>
      </nav>
    </div>
    <!-- end header-->
    <div class="wrapper">
      <section><h2 id="ellipsis-build-status-https-travis-ci-org-zeekay-ellipsis-svg-branch-master-https-travis-ci-org-zeekay-ellipsis-">ellipsis <a href="https://travis-ci.org/zeekay/ellipsis"><img src="https://travis-ci.org/zeekay/ellipsis.svg?branch=master" alt="Build Status"></a></h2>
<pre><code><span class="hljs-tag"> <span class="hljs-title">_</span>    <span class="hljs-title">_</span>    <span class="hljs-title">_</span>
</span><span class="hljs-tag">/\<span class="hljs-title">_</span>\ /\<span class="hljs-title">_</span>\ /\<span class="hljs-title">_</span>\
</span><span class="hljs-tag">\/<span class="hljs-title">_</span>/ \/<span class="hljs-title">_</span>/ \/<span class="hljs-title">_</span>/   â€¦<span class="hljs-title">because</span> $<span class="hljs-title">HOME</span> <span class="hljs-title">is</span> <span class="hljs-title">where</span> <span class="hljs-title">the</span> &lt;<span class="hljs-title">3</span> <span class="hljs-title">is</span>!</span>
</code></pre><p>Ellipsis is a package manager for dotfiles.</p>
<h3 id="features">Features</h3>
<ul>
<li>Creating new packages is trivial (any git repository is already a package).</li>
<li>Modular configuration files are easier to maintain and share with others.</li>
<li>Allows you to quickly see which dotfiles have been modified, and keep them
updated and in-sync across systems.</li>
<li>Adding new dotfiles to your collection can be automated with <code>ellipsis add</code>.</li>
<li>Cross platform, known to work on Mac OS X, Linux, FreeBSD and even Cygwin.</li>
<li>Large test suite to ensure your <code>$HOME</code> doesn&#39;t get ravaged.</li>
<li>Completely customizable.</li>
</ul>
<h3 id="install">Install</h3>
<p>Clone and symlink or use handy-dandy installer:</p>
<pre><code class="lang-bash">$ curl ellipsis.sh | sh
</code></pre>
<p><sup>...no you didn&#39;t read that wrong, <a href="https://github.com/zeekay/ellipsis/blob/gh-pages/index.html#L322">this website also doubles as the installer</a></sup></p>
<p>You can also specify which packages to install by setting the <code>PACKAGES</code> variable, i.e.:</p>
<pre><code class="lang-bash">$ curl ellipsis.sh | PACKAGES=<span class="hljs-string">'vim zsh'</span> sh
</code></pre>
<p>Add <code>~/.ellipsis/bin</code> to your <code>$PATH</code> (or symlink somewhere convenient) and
start managing your dotfiles in style :)</p>
<h3 id="usage">Usage</h3>
<p>Ellipsis comes with no dotfiles out of the box. To install packages, use
<code>ellipsis install</code>. Packages can be specified by github-user/repo or full
ssh/git/http(s) urls:</p>
<pre><code class="lang-bash">$ ellipsis install ssh://github.com/zeekay/private.git
$ ellipsis install zeekay/vim
$ ellipsis install zsh
</code></pre>
<p>...all work. By convention <code>username/package</code> and <code>package</code> are aliases for
<a href="https://github.com/username/dot-package">https://github.com/username/dot-package</a>.</p>
<p>Full usage available via <code>ellipsis</code> executable:</p>
<pre><code><span class="hljs-attribute keyword">$ </span>ellipsis -h
<span class="hljs-attribute keyword">Usage: </span>ellipsis &lt;command&gt;
<span class="hljs-tag">  <span class="hljs-title">Options</span>:
</span>    -h, --help     show help
    -v, --version  show version
<span class="hljs-tag">
  <span class="hljs-title">Commands</span>:
</span><span class="hljs-tag">    <span class="hljs-title">new</span>        <span class="hljs-title">create</span> <span class="hljs-title">a</span> <span class="hljs-title">new</span> <span class="hljs-title">package</span>
</span><span class="hljs-tag">    <span class="hljs-title">edit</span>       <span class="hljs-title">edit</span> <span class="hljs-title">an</span> <span class="hljs-title">installed</span> <span class="hljs-title">package</span>
</span><span class="hljs-tag">    <span class="hljs-title">add</span>        <span class="hljs-title">add</span> <span class="hljs-title">new</span> <span class="hljs-title">dotfile</span> <span class="hljs-title">to</span> <span class="hljs-title">package</span>
</span><span class="hljs-tag">    <span class="hljs-title">install</span>    <span class="hljs-title">install</span> <span class="hljs-title">new</span> <span class="hljs-title">package</span>
</span><span class="hljs-tag">    <span class="hljs-title">uninstall</span>  <span class="hljs-title">uninstall</span> <span class="hljs-title">package</span>
</span><span class="hljs-tag">    <span class="hljs-title">link</span>       <span class="hljs-title">link</span> <span class="hljs-title">package</span>
</span><span class="hljs-tag">    <span class="hljs-title">unlink</span>     <span class="hljs-title">unlink</span> <span class="hljs-title">package</span>
</span><span class="hljs-tag">    <span class="hljs-title">broken</span>     <span class="hljs-title">list</span> <span class="hljs-title">any</span> <span class="hljs-title">broken</span> <span class="hljs-title">symlinks</span>
</span><span class="hljs-tag">    <span class="hljs-title">clean</span>      <span class="hljs-title">rm</span> <span class="hljs-title">broken</span> <span class="hljs-title">symlinks</span>
</span><span class="hljs-tag">    <span class="hljs-title">installed</span>  <span class="hljs-title">list</span> <span class="hljs-title">installed</span> <span class="hljs-title">packages</span>
</span><span class="hljs-tag">    <span class="hljs-title">links</span>      <span class="hljs-title">show</span> <span class="hljs-title">symlinks</span> <span class="hljs-title">installed</span> <span class="hljs-title">by</span> <span class="hljs-title">package</span><span class="hljs-attribute">(<span class="hljs-attribute"><span class="hljs-attribute">s</span>)</span></span>
</span><span class="hljs-tag">    <span class="hljs-title">pull</span>       <span class="hljs-title">git</span> <span class="hljs-title">pull</span> <span class="hljs-title">package</span><span class="hljs-attribute">(<span class="hljs-attribute"><span class="hljs-attribute">s</span>)</span></span>
</span><span class="hljs-tag">    <span class="hljs-title">push</span>       <span class="hljs-title">git</span> <span class="hljs-title">push</span> <span class="hljs-title">package</span><span class="hljs-attribute">(<span class="hljs-attribute"><span class="hljs-attribute">s</span>)</span></span>
</span><span class="hljs-tag">    <span class="hljs-title">status</span>     <span class="hljs-title">show</span> <span class="hljs-title">status</span> <span class="hljs-title">of</span> <span class="hljs-title">package</span><span class="hljs-attribute">(<span class="hljs-attribute"><span class="hljs-attribute">s</span>)</span></span>
</span><span class="hljs-tag">    <span class="hljs-title">publish</span>    <span class="hljs-title">publish</span> <span class="hljs-title">package</span> <span class="hljs-title">to</span> <span class="hljs-title">repository</span>
</span><span class="hljs-tag">    <span class="hljs-title">search</span>     <span class="hljs-title">search</span> <span class="hljs-title">package</span> <span class="hljs-title">repository</span></span>
</code></pre><h3 id="configuration">Configuration</h3>
<p>You can customize ellipsis by exporting a few different variables:</p>
<h4 id="github_user-ellipsis_user">GITHUB_USER / ELLIPSIS_USER</h4>
<p>Customizes whose dotfiles are installed when you <code>ellipsis install</code> without
specifiying user or a full repo url. Defaults to <code>$(git config github.user)</code> or
<code>zeekay</code>.</p>
<h4 id="ellipsis_repo">ELLIPSIS_REPO</h4>
<p>Customize location of ellipsis repo cloned during a curl-based install. Defaults
to <code>https://github.com/zeekay/ellipsis</code>.</p>
<h4 id="ellipsis_proto">ELLIPSIS_PROTO</h4>
<p>Customizes which protocol new packages are cloned with, you can specify
<code>https</code>,<code>ssh</code>, <code>git</code>. Defaults to <code>https</code>.</p>
<h4 id="ellipsis_home">ELLIPSIS_HOME</h4>
<p>Customize which folder files are symlinked into, defaults to <code>$HOME</code>. (Mostly
useful for testing).</p>
<h4 id="ellipsis_path">ELLIPSIS_PATH</h4>
<p>Customize where ellipsis lives on your filesystem, defaults to <code>~/.ellipsis</code>.</p>
<pre><code class="lang-bash"><span class="hljs-keyword">export</span> ELLIPSIS_USER=<span class="hljs-string">"zeekay"</span>
<span class="hljs-keyword">export</span> ELLIPSIS_SSH=<span class="hljs-string">"ssh"</span>
<span class="hljs-keyword">export</span> ELLIPSIS_PATH=<span class="hljs-string">"~/.el"</span>
</code></pre>
<h3 id="packages">Packages</h3>
<p>A package is any repo with files you want to symlink into <code>$ELLIPSIS_PATH</code>
(typically <code>$HOME</code>). By default a given repo&#39;s non-hidden files (read: not
beginning with a <code>.</code>) will naively be linked into place. Need a more complex
instsall process? No problem. You can customize every aspect of how ellipsis
uses your package using various hooks.</p>
<h3 id="hooks">Hooks</h3>
<p>Hooks are defined in <code>ellipsis.sh</code> files in the root of your package&#39;s
repository. Hooks allow you to customize how ellipsis interacts with your
package. For instance, if you wanted to change how your package is installed you
can define <code>pkg.install</code> and specifiy exactly which files are symlinked into
place, compile any libraries necessary, etc.</p>
<h4 id="example">Example</h4>
<p>Here&#39;s a full example of an <code>ellipsis.sh</code> file:</p>
<pre><code class="lang-bash"><span class="hljs-shebang">#!/usr/bin/env bash</span>
</code></pre>
<p>...of course that&#39;s not very helpful! But it&#39;s true, the <code>ellipsis.sh</code> file is
completely optional if all you want to do is symlink some files into your
<code>$HOME</code>.</p>
<p>Here&#39;s a more complete example (from
<a href="https://github.com/zeekay/dot-files">zeekay/files</a>, my collection of common,
cross-platform dotfiles):</p>
<pre><code class="lang-bash"><span class="hljs-shebang">#!/usr/bin/env bash
</span>
pkg.<span class="hljs-function"><span class="hljs-title">install</span></span>() {
    fs.link_files common

    <span class="hljs-keyword">case</span> $(os.platform) <span class="hljs-keyword">in</span>
        cygwin)
            fs.link_files platform/cygwin
            ;;
        osx)
            fs.link_files platform/osx
            ;;
        freebsd)
            fs.link_files platform/freebsd
            ;;
        linux)
            fs.link_files platform/linux
            ;;
    <span class="hljs-keyword">esac</span>
}
</code></pre>
<p>...and here&#39;s a slightly more complex example (used by
<a href="https://github.com/zeekay/dot-vim">zeekay/vim</a>, my vim configuration):</p>
<pre><code class="lang-bash"><span class="hljs-shebang">#!/usr/bin/env bash
</span>
pkg.<span class="hljs-function"><span class="hljs-title">install</span></span>() {
    files=(gvimrc vimrc vimgitrc vimpagerrc)

    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> <span class="hljs-variable">${files[@]}</span>; <span class="hljs-keyword">do</span>
        fs.link_file <span class="hljs-variable">$file</span>
    <span class="hljs-keyword">done</span>

    <span class="hljs-comment"># link module into ~/.vim</span>
    fs.link_file <span class="hljs-variable">$PKG_PATH</span>

    <span class="hljs-comment"># install dependencies</span>
    <span class="hljs-built_in">cd</span> ~/.vim/addons
    git.clone https://github.com/zeekay/vice
    git.clone https://github.com/MarcWeber/vim-addon-manager
}

<span class="hljs-function"><span class="hljs-title">helper</span></span>() {
    <span class="hljs-comment"># run command for ourselves</span>
    <span class="hljs-variable">$1</span>

    <span class="hljs-comment"># run command for each addon</span>
    <span class="hljs-keyword">for</span> addon <span class="hljs-keyword">in</span> ~/.vim/addons/*; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">cd</span> <span class="hljs-variable">$addon</span>
        <span class="hljs-variable">$1</span> <span class="hljs-variable">$addon</span>
    <span class="hljs-keyword">done</span>
}

pkg.<span class="hljs-function"><span class="hljs-title">pull</span></span>() {
    helper git.pull
}

pkg.<span class="hljs-function"><span class="hljs-title">status</span></span>() {
    helper hooks.status
}

pkg.<span class="hljs-function"><span class="hljs-title">push</span></span>() {
    git.push

    <span class="hljs-comment"># git push only repos where we have push permission</span>
    <span class="hljs-keyword">for</span> addon <span class="hljs-keyword">in</span> ~/.vim/addons/*; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$(cat $addon/.git/config | grep $ELLIPSIS_USER)</span>"</span> ]; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">cd</span> <span class="hljs-variable">$addon</span>
            git.push <span class="hljs-variable">$addon</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>
}
</code></pre>
<h3 id="api">API</h3>
<p>Typically you&#39;ll interact with the ellipsis API from your package&#39;s
<code>ellipsis.sh</code> file. Besides the hooks which you can use to customize how
ellipsis interacts with your package, there is a large collection of functions
and variables which you might find useful in your packages.</p>
<p>Hooks are executed from the root of your package and <code>$PKG_NAME</code> and <code>$PKG_PATH</code>
are set to reflect your package. The hooks available
are:</p>
<h4 id="pkg-add">pkg.add</h4>
<p>Customizes how a files is added to your package.</p>
<h4 id="pkg-install">pkg.install</h4>
<p>Customize how package is installed. By default all files are symlinked into
place.</p>
<h4 id="pkg-installed">pkg.installed</h4>
<p>Customize how package is listed as installed.</p>
<h4 id="pkg-links">pkg.links</h4>
<p>Customizes which files are detected as symlinks.</p>
<h4 id="pkg-pull">pkg.pull</h4>
<p>Customize how how changes are pulled in when <code>ellipsis pull</code> is used.</p>
<h4 id="pkg-push">pkg.push</h4>
<p>Customize how how changes are pushed <code>ellipsis push</code> is used.</p>
<h4 id="pkg-status">pkg.status</h4>
<p>Customize output of <code>ellipsis status</code>.</p>
<h4 id="pkg-uninstall">pkg.uninstall</h4>
<p>Customize how package is uninstalled. By default all symlinks are removed and
the package is deleted from <code>$ELLIPSIS_PATH/packages</code>.</p>
<h4 id="pkg-uninstall">pkg.uninstall</h4>
<p>Customize which files are unlinked by your package.</p>
<p>For references all the default hooks are available as <code>hooks.&lt;hookname&gt;</code>, which
makes it easy to use them in your hooks.</p>
<p>You can also call pretty much any internal ellipsis function, there are several
which you might find useful when writing your own hooks:</p>
<h4 id="ellipsis-list_packages">ellipsis.list_packages</h4>
<p>Lists all installed packages.</p>
<h4 id="ellipsis-each">ellipsis.each</h4>
<p>Executes command for each installed package.</p>
<h4 id="fs-folder_empty">fs.folder_empty</h4>
<p>Returns true if folder is empty.</p>
<h4 id="fs-file_exists">fs.file_exists</h4>
<p>Returns true if file exists.</p>
<h4 id="fs-is_symlink">fs.is_symlink</h4>
<p>Returns true if file is a symlink.</p>
<h4 id="fs-is_ellipsis_symlink">fs.is_ellipsis_symlink</h4>
<p>Returns true if file is a symlink pointing to an ellipsis package.</p>
<h5 id="fs-is_broken_symlink">fs.is_broken_symlink</h5>
<p>Returns true if file is a broken symlink.</p>
<h5 id="fs-list_symlinks">fs.list_symlinks</h5>
<p>Lists symlinks in a folder, defaulting to <code>$ELLIPSIS_HOME</code>.</p>
<h5 id="fs-backup">fs.backup</h5>
<p>Creates a backup of an existing file, ensuring you don&#39;t overwrite existing backups.</p>
<h5 id="fs-link_file">fs.link_file</h5>
<p>Symlinks a single file into <code>$ELLIPSIS_HOME</code>.</p>
<h4 id="fs-link_files">fs.link_files</h4>
<p>Symlinks all files in given folder into <code>$ELLIPSIS_HOME</code>.</p>
<h4 id="git-clone">git.clone</h4>
<p>Clones a Git repo, identical to <code>git clone</code>.</p>
<h4 id="git-pull">git.pull</h4>
<p>Identical to <code>git pull</code>.</p>
<h4 id="git-push">git.push</h4>
<p>Identical to <code>git push</code>.</p>
<h4 id="git-sha1">git.sha1</h4>
<p>Prints last commit&#39;s sha1 using <code>git rev-parse --short HEAD</code>.</p>
<h4 id="git-last_updated">git.last_updated</h4>
<p>Prints commit&#39;s relative last update time.</p>
<h4 id="git-head">git.head</h4>
<p>Prints how far ahead a package is from origin.</p>
<h4 id="git-has_changes">git.has_changes</h4>
<p>Returns true if repository has changes.</p>
<h4 id="git-diffstat">git.diffstat</h4>
<p>Displays <code>git diff --stat</code>.</p>
<h4 id="os-platform">os.platform</h4>
<p>Returns one of <code>cygwin</code>, <code>freebsd</code>, <code>linux</code>, <code>osx</code>.</p>
<h4 id="utils-cmd_exists">utils.cmd_exists</h4>
<p>Returns true if command exists.</p>
<h4 id="utils-prompt">utils.prompt</h4>
<p>Prompts user <code>$1</code> message and returns true if <code>YES</code> or <code>yes</code> is input.</p>
<h4 id="utils-run_installer">utils.run_installer</h4>
<p>Downloads and runs web-based shell script installers.</p>
<h3 id="available-packages">Available packages</h3>
<h4 id="-zeekay-alfred-alfred-"><a href="https://github.com/zeekay/dot-alfred">zeekay/alfred</a></h4>
<p>Alfred configuration files.</p>
<h4 id="-zeekay-atom-atom-"><a href="https://github.com/zeekay/dot-atom">zeekay/atom</a></h4>
<p>Atom configuration files.</p>
<h4 id="-zeekay-emacs-emacs-"><a href="https://github.com/zeekay/dot-emacs">zeekay/emacs</a></h4>
<p>Emacs configuration files.</p>
<h4 id="-zeekay-files-files-"><a href="https://github.com/zeekay/dot-files">zeekay/files</a></h4>
<p>Common dotfiles for various programs.</p>
<h4 id="-zeekay-irssi-irssi-"><a href="https://github.com/zeekay/dot-irssi">zeekay/irssi</a></h4>
<p>Irssi configuration.</p>
<h4 id="-zeekay-iterm2-iterm2-"><a href="https://github.com/zeekay/dot-iterm2">zeekay/iterm2</a></h4>
<p>iTerm2 configuration files.</p>
<h4 id="-zeekay-vim-vim-"><a href="https://github.com/zeekay/dot-vim">zeekay/vim</a></h4>
<p>Vim configuration based on vice framework.</p>
<h4 id="-zeekay-xmonad-xmonad-"><a href="https://github.com/zeekay/dot-xmonad">zeekay/xmonad</a></h4>
<p>Xmonad configuration.</p>
<h4 id="-zeekay-zsh-zsh-"><a href="https://github.com/zeekay/dot-zsh">zeekay/zsh</a></h4>
<p>Zsh configuration using zeesh! framework.</p>
<h3 id="completions">Completions</h3>
<p>A completion file for zsh is <a href="zshcomp">included</a>. To use it add <code>_ellipsis</code> to
your <code>fpath</code> and ensure auto-completion is enabled:</p>
<pre><code class="lang-bash">fpath=(<span class="hljs-variable">$HOME</span>/.ellipsis/comp <span class="hljs-variable">$fpath</span>)
autoload -U compinit; compinit
</code></pre>
<h3 id="development">Development</h3>
<p>Pull requests welcome! New code should follow <a href="style-guide">existing style</a> and include tests
(tests are written with <a href="https://github.com/sstephenson/bats">bats</a>).</p>
<p>To suggest a feature or report a bug: <a href="http://github.com/zeekay/ellipsis/issues">http://github.com/zeekay/ellipsis/issues</a>.</p>
</section>
    </div>
    <!--if !IE
    script
      fixScale(document);
    -->
  </body>
</html><!--
EOF

# shim for ellipsis install.bash
#
# This is used on ellipsis.sh to bootstrap the full installer, which you
# otherwise can't curl and pipe to sh (as it requires bash). Not meant to be
# run standalone.

# wait for curl output to finish
sleep 0.5

# Ensure dependencies are installed.
deps="bash curl git"

for dep in $deps; do
    hash $dep 2>/dev/null || { echo >&2 "ellipsis requires $dep to be installed."; exit 1; }
done

# Download full installer and execute with bash
curl -sL https://raw.githubusercontent.com/zeekay/ellipsis/master/scripts/install.bash > install-$$.bash
bash install-$$.bash

# Clean up
rm install-$$.bash
